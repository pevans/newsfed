# Specification Test Coverage
# This file tracks which specification sections have black box test coverage
#
# Structure:
#   specs: List of Specifications
#     - spec: Specification identifier (e.g., spec-8)
#       title: Specification title
#       sections: List of sections in the specification
#         - section: Section number (e.g., 3.1.1)
#           title: Section title
#           testable: Whether this section can be tested with black box tests
#           tests: List of test files that cover this section (empty list if not tested)

specs:
  - spec: spec-1
    title: "newsfed: a news feed"
    sections:
      - section: "1"
        title: "newsfed: a news feed"
        testable: false

      - section: "2"
        title: Storage of the news feed
        testable: false

      - section: "2.1"
        title: Structure of a single news item
        testable: true
        tests:
          - "tests/cli-data-model.bats::spec-1 data model: JSON output contains all required fields"
          - "tests/cli-data-model.bats::spec-1 data model: id field is a valid UUID"
          - "tests/cli-data-model.bats::spec-1 data model: publisher field is optional and omitted when absent"
          - "tests/cli-data-model.bats::spec-1 data model: authors field is a list of strings"
          - "tests/cli-data-model.bats::spec-1 data model: authors supports multiple entries"
          - "tests/cli-data-model.bats::spec-1 data model: authors can be an empty list"
          - "tests/cli-data-model.bats::spec-1 data model: pinned_at present when item is pinned"
          - "tests/cli-data-model.bats::spec-1 data model: pinned_at omitted when item is not pinned"
          - "tests/cli-data-model.bats::spec-1 data model: timestamps use RFC 3339 format"
          - "tests/cli-data-model.bats::spec-1 data model: published_at prefers updated date over published date"

      - section: "2.2"
        title: Structure of a news feed
        testable: true
        tests:
          - "tests/cli-data-model.bats::spec-1 data model: items remain in feed indefinitely"
          - "tests/cli-data-model.bats::spec-1 data model: client filters items not the feed"

  - spec: spec-2
    title: External News Feed Ingestion
    sections:
      - section: "1"
        title: External News Feed Ingestion
        testable: false

      - section: "2.1"
        title: Feed Source Configuration
        testable: true
        tests:
          # Cross-referenced from spec-8 tests that validate source fields
          - "tests/cli-sources.bats::newsfed sources add: adds RSS source"
          - "tests/cli-sources.bats::newsfed sources add: adds Atom source"
          - "tests/cli-sources.bats::newsfed sources show: displays source details"

      - section: "2.2"
        title: Feed Ingestion Process
        testable: true
        tests:
          - "tests/cli-ingestion.bats::ingestion: synced RSS items appear in news feed"
          # Cross-referenced from spec-8 sync tests
          - "tests/cli-sources.bats::newsfed sources sync: syncs all enabled sources"
          - "tests/cli-sources.bats::newsfed sources sync: syncs specific source by ID"

      - section: "2.2.1"
        title: Feed Fetching
        testable: true
        tests:
          - "tests/cli-ingestion.bats::ingestion: handles unreachable feed URL gracefully"
          - "tests/cli-ingestion.bats::ingestion: handles invalid feed content gracefully"

      - section: "2.2.2"
        title: Polling Frequency
        testable: false

      - section: "2.2.3"
        title: Item Limiting
        testable: true
        tests:
          - "tests/cli-ingestion.bats::ingestion: first sync limits to 20 most recent items"
          - "tests/cli-ingestion.bats::ingestion: regular polling catches items missed by first sync limit"
          - "tests/cli-ingestion.bats::ingestion: stale source re-applies 20 item limit"
          - "tests/cli-ingestion.bats::ingestion: source fetched 14 days ago is not considered stale"

      - section: "2.3"
        title: RSS Feed Support
        testable: false

      - section: "2.3.1"
        title: RSS to NewsItem Mapping
        testable: true
        tests:
          - "tests/cli-ingestion.bats::ingestion: RSS fields map correctly to NewsItem"

      - section: "2.3.2"
        title: RSS Deduplication Strategy
        testable: true
        tests:
          - "tests/cli-ingestion.bats::ingestion: RSS deduplication prevents duplicate items on re-sync"

      - section: "2.4"
        title: Atom Feed Support
        testable: false

      - section: "2.4.1"
        title: Atom to NewsItem Mapping
        testable: true
        tests:
          - "tests/cli-ingestion.bats::ingestion: Atom fields map correctly to NewsItem"
          # Cross-referenced: tests updated-over-published preference
          - "tests/cli-data-model.bats::spec-1 data model: published_at prefers updated date over published date"

      - section: "2.4.2"
        title: Atom Deduplication Strategy
        testable: true
        tests:
          - "tests/cli-ingestion.bats::ingestion: Atom deduplication prevents duplicate items on re-sync"

  - spec: spec-8
    title: Basic News Feed Client
    sections:
      - section: "1"
        title: Overview
        testable: false

      - section: "2"
        title: Client Architecture
        testable: false

      - section: "3.1.1"
        title: List News Items
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list: shows recent items"
          - "tests/cli-list.bats::newsfed list: does not show old unpinned items"
          - "tests/cli-list.bats::newsfed list --all: shows all items"
          - "tests/cli-list.bats::newsfed list --publisher: filters by publisher"
          - "tests/cli-list.bats::newsfed list --pinned: shows only pinned items"
          - "tests/cli-list.bats::newsfed list --sort: sorts results"
          - "tests/cli-list.bats::newsfed list --limit: limits results"
          - "tests/cli-list.bats::newsfed list --offset: paginates results"

      - section: "3.1.2"
        title: View Individual Items
        testable: true
        tests:
          - "tests/cli-items.bats::newsfed show: displays all item metadata"

      - section: "3.1.3"
        title: Pin and Unpin Items
        testable: true
        tests:
          - "tests/cli-items.bats::newsfed pin: pins an unpinned item"
          - "tests/cli-items.bats::newsfed unpin: unpins a pinned item"

      - section: "3.1.4"
        title: Open Items in Browser
        testable: true
        tests:
          - "tests/cli-items.bats::newsfed open: opens item in browser"

      - section: "3.2.1"
        title: List Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources list: shows all sources"
          - "tests/cli-sources.bats::newsfed sources list: handles empty source list"

      - section: "3.2.2"
        title: View Source Details
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources show: displays source details"

      - section: "3.2.3"
        title: Add Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources add: adds RSS source"
          - "tests/cli-sources.bats::newsfed sources add: adds Atom source"
          - "tests/cli-sources.bats::newsfed sources add: adds website source"

      - section: "3.2.4"
        title: Update Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources update: updates source name"
          - "tests/cli-sources.bats::newsfed sources update: updates source URL"

      - section: "3.2.5"
        title: Enable and Disable Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources disable: disables a source"
          - "tests/cli-sources.bats::newsfed sources enable: enables a source"

      - section: "3.2.6"
        title: Delete Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources delete: deletes a source"

      - section: "3.2.7"
        title: Sync Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources sync: syncs all enabled sources"
          - "tests/cli-sources.bats::newsfed sources sync: syncs specific source by ID"

      - section: "3.3.1"
        title: Check Source Status
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources status: shows no sources message when empty"
          - "tests/cli-sources.bats::newsfed sources status: shows all sources healthy when no issues"
          - "tests/cli-sources.bats::newsfed sources status: detects sources with errors"
          - "tests/cli-sources.bats::newsfed sources status: detects never fetched sources"
          - "tests/cli-sources.bats::newsfed sources status: detects stale sources (>24h)"
          - "tests/cli-sources.bats::newsfed sources status: detects disabled sources"
          - "tests/cli-sources.bats::newsfed sources status: verbose mode shows full error messages"
          - "tests/cli-sources.bats::newsfed sources status: handles mixed health states"
          - "tests/cli-sources.bats::newsfed sources status: provides actionable suggestions"

      - section: "3.3.2"
        title: View Error History
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources errors: shows no errors for clean source"
          - "tests/cli-sources.bats::newsfed sources errors: shows recorded errors"
          - "tests/cli-sources.bats::newsfed sources errors: shows errors in reverse chronological order"
          - "tests/cli-sources.bats::newsfed sources errors: requires source ID argument"
          - "tests/cli-sources.bats::newsfed sources errors: validates source ID format"
          - "tests/cli-sources.bats::newsfed sources errors: handles non-existent source"

      - section: "3.4.1"
        title: Doctor Command
        testable: true
        tests:
          - "tests/cli-init.bats::newsfed doctor: verifies healthy storage"
          - "tests/cli-init.bats::newsfed doctor --verbose: shows detailed diagnostic information"

      - section: "3.4.2"
        title: Checks Performed
        testable: true
        tests:
          - "tests/cli-init.bats::newsfed doctor: detects missing metadata database"
          - "tests/cli-init.bats::newsfed doctor: detects missing feed directory"
          - "tests/cli-init.bats::newsfed doctor: detects feed path that is not a directory"
          - "tests/cli-init.bats::newsfed doctor: checks storage connectivity"
          - "tests/cli-init.bats::newsfed doctor: reports unreadable feed items"
          - "tests/cli-security.bats::newsfed doctor: warns when database has overly permissive permissions"
          - "tests/cli-security.bats::newsfed doctor: warns when feed directory has overly permissive permissions"
          - "tests/cli-security.bats::newsfed doctor: warns when feed files have overly permissive permissions"

      - section: "3.4.3"
        title: Output
        testable: true
        tests:
          - "tests/cli-init.bats::newsfed doctor: returns exit code 0 on healthy storage"
          - "tests/cli-init.bats::newsfed doctor: returns exit code 0 on warnings"
          - "tests/cli-init.bats::newsfed doctor: detects missing metadata database"
          - "tests/cli-init.bats::newsfed doctor: detects missing feed directory"
          - "tests/cli-security.bats::newsfed doctor: no warnings when all permissions are correct"

      - section: "4.1"
        title: Storage Configuration
        testable: true
        tests:
          - "tests/cli-config.bats::newsfed config: reads from environment variables"
          - "tests/cli-config.bats::newsfed config: reads from config file"
          - "tests/cli-config.bats::newsfed config: environment overrides config file"
          - "tests/cli-config.bats::newsfed config: supports storage type"
          - "tests/cli-init.bats::newsfed init: creates default config file"
          - "tests/cli-init.bats::newsfed init: skips config file if already exists"
          - "tests/cli-init.bats::newsfed init --force: recreates config file"
          - "tests/cli-init.bats::newsfed init: creates config file with correct permissions"

      - section: "5.1.1"
        title: Table Format (Default)
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list: default output format"
          - "tests/cli-list.bats::newsfed list --format=table: shows table format"

      - section: "5.1.2"
        title: JSON Format
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list --format=json: outputs JSON"

      - section: "5.1.3"
        title: Compact Format
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list --format=compact: shows compact format"

      - section: "6.1"
        title: Storage Errors
        testable: true
        tests:
          - "tests/cli-errors.bats::newsfed errors: handles missing metadata database"
          - "tests/cli-errors.bats::newsfed errors: handles corrupted database"
          - "tests/cli-errors.bats::newsfed errors: handles missing feed directory"
          - "tests/cli-errors.bats::newsfed errors: handles corrupted JSON files"

      - section: "6.2"
        title: User Input Validation
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources add: requires --type flag"
          - "tests/cli-sources.bats::newsfed sources add: requires --url flag"
          - "tests/cli-sources.bats::newsfed sources add: requires --name flag"
          - "tests/cli-sources.bats::newsfed sources add: rejects invalid type"
          - "tests/cli-errors.bats::newsfed errors: validates UUID format"
          - "tests/cli-errors.bats::newsfed errors: validates URL format"

      - section: "6.3"
        title: Storage Initialization
        testable: true
        tests:
          - "tests/cli-init.bats::newsfed init: creates metadata database"
          - "tests/cli-init.bats::newsfed init: creates feed directory"
          - "tests/cli-init.bats::newsfed init: creates default config file"
          - "tests/cli-init.bats::newsfed init: skips config file if already exists"
          - "tests/cli-init.bats::newsfed init --force: recreates config file"

      - section: "6.4"
        title: Partial Failures
        testable: true
        tests:
          - "tests/cli-errors.bats::newsfed errors: handles corrupted JSON item files"
          - "tests/cli-errors.bats::newsfed errors: list displays valid items alongside corrupted file warnings"
          - "tests/cli-errors.bats::newsfed errors: list reports multiple corrupted files"

      - section: "7"
        title: Future Enhancements
        testable: false

      - section: "7"
        title: Security Considerations
        testable: true
        tests:
          - "tests/cli-security.bats::newsfed init: creates feed directory with 0700 permissions"
          - "tests/cli-security.bats::newsfed init: creates metadata database with 0600 permissions"
          - "tests/cli-security.bats::newsfed init: never creates world-readable storage files"
          - "tests/cli-security.bats::newsfed doctor: warns when database has overly permissive permissions"
          - "tests/cli-security.bats::newsfed doctor: warns when feed directory has overly permissive permissions"
          - "tests/cli-security.bats::newsfed doctor: warns when feed files have overly permissive permissions"
          - "tests/cli-security.bats::newsfed doctor: no warnings when all permissions are correct"
          - "tests/cli-security.bats::newsfed sources add: database retains 0600 permissions after source operations"
          - "tests/cli-security.bats::newsfed sources add: implicitly created database gets 0600 permissions"

      - section: "8"
        title: Implementation Considerations
        testable: false

      - section: "9"
        title: Example Workflows
        testable: false

      - section: "10"
        title: Testing
        testable: false

      - section: "11"
        title: Implementation Phases
        testable: false

      - section: "12"
        title: Relationship to Other Specifications
        testable: false

  - spec: spec-3
    title: Web Scraping Ingestion
    sections:
      - section: "1"
        title: Web Scraping Ingestion
        testable: false

      - section: "2"
        title: Scraping Source Configuration
        testable: false

      - section: "2.1"
        title: Scraper Source Definition
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: adds website source with scraper config"
          # Cross-referenced from spec-8 website source tests
          - "tests/cli-sources.bats::newsfed sources add: adds website source"
          - "tests/cli-sources.bats::newsfed sources show: displays source details"

      - section: "2.2"
        title: Scraper Configuration Structure
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: direct mode scrapes single article"
          - "tests/cli-scraping.bats::scraping: list mode discovers articles from index page"
          - "tests/cli-scraping.bats::scraping: list mode follows pagination"
          - "tests/cli-scraping.bats::scraping: list mode respects max_pages limit"

      - section: "2.3"
        title: Selector Syntax
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: extracts data using CSS selectors"
          - "tests/cli-scraping.bats::scraping: handles missing selectors gracefully"

      - section: "3"
        title: Scraping Process
        testable: false

      - section: "3.1"
        title: Discovery and Extraction Flow
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: full scraping flow extracts all fields"
          # Cross-referenced from spec-2 ingestion flow
          - "tests/cli-ingestion.bats::ingestion: synced RSS items appear in news feed"

      - section: "3.1.1"
        title: Article Limiting
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: first sync limits to 20 articles"
          - "tests/cli-scraping.bats::scraping: regular polling catches all new articles"
          - "tests/cli-scraping.bats::scraping: stale source re-applies 20 article limit"
          - "tests/cli-scraping.bats::scraping: source fetched 14 days ago is not considered stale"
          - "tests/cli-scraping.bats::scraping: pagination stops at 20 articles across pages"
          # Cross-referenced from spec-2 item limiting tests
          - "tests/cli-ingestion.bats::ingestion: first sync limits to 20 most recent items"
          - "tests/cli-ingestion.bats::ingestion: regular polling catches items missed by first sync limit"
          - "tests/cli-ingestion.bats::ingestion: stale source re-applies 20 item limit"
          - "tests/cli-ingestion.bats::ingestion: source fetched 14 days ago is not considered stale"

      - section: "3.2"
        title: HTML Fetching
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: handles HTTP errors gracefully"
          - "tests/cli-scraping.bats::scraping: handles timeouts gracefully"
          - "tests/cli-scraping.bats::scraping: follows HTTP redirects"
          - "tests/cli-scraping.bats::scraping: includes User-Agent header"
          # Cross-referenced from spec-2 feed fetching
          - "tests/cli-ingestion.bats::ingestion: handles unreachable feed URL gracefully"
          - "tests/cli-ingestion.bats::ingestion: handles invalid feed content gracefully"

      - section: "3.3"
        title: Rate Limiting and Politeness
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: respects rate limiting between requests"
          - "tests/cli-scraping.bats::scraping: makes sequential requests to same domain"

      - section: "3.4"
        title: Content Extraction
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: extracts and cleans title"
          - "tests/cli-scraping.bats::scraping: uses (No title) when title missing"
          - "tests/cli-scraping.bats::scraping: truncates long content for summary"
          - "tests/cli-scraping.bats::scraping: extracts multiple authors"
          - "tests/cli-scraping.bats::scraping: splits comma-separated authors"
          - "tests/cli-scraping.bats::scraping: parses dates with format string"
          - "tests/cli-scraping.bats::scraping: uses current time when date parsing fails"

      - section: "3.5"
        title: Error Handling
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: handles malformed HTML"
          - "tests/cli-scraping.bats::scraping: handles network errors"
          - "tests/cli-scraping.bats::scraping: handles missing elements"
          # Cross-referenced from spec-2 error handling
          - "tests/cli-ingestion.bats::ingestion: handles unreachable feed URL gracefully"
          - "tests/cli-ingestion.bats::ingestion: handles invalid feed content gracefully"

      - section: "4"
        title: Scraper to NewsItem Mapping
        testable: false

      - section: "4.1"
        title: Field Mapping
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: scraper fields map correctly to NewsItem"
          # Cross-referenced from spec-1 data model tests
          - "tests/cli-data-model.bats::spec-1 data model: JSON output contains all required fields"
          - "tests/cli-data-model.bats::spec-1 data model: id field is a valid UUID"
          - "tests/cli-data-model.bats::spec-1 data model: publisher field is optional and omitted when absent"
          - "tests/cli-data-model.bats::spec-1 data model: authors field is a list of strings"
          - "tests/cli-data-model.bats::spec-1 data model: timestamps use RFC 3339 format"
          # Cross-referenced from spec-2 field mapping tests
          - "tests/cli-ingestion.bats::ingestion: RSS fields map correctly to NewsItem"
          - "tests/cli-ingestion.bats::ingestion: Atom fields map correctly to NewsItem"

      - section: "4.2"
        title: Deduplication Strategy
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: deduplication prevents duplicate items on re-sync"
          - "tests/cli-scraping.bats::scraping: deduplication uses URL as unique identifier"
          # Cross-referenced from spec-2 deduplication tests
          - "tests/cli-ingestion.bats::ingestion: RSS deduplication prevents duplicate items on re-sync"
          - "tests/cli-ingestion.bats::ingestion: Atom deduplication prevents duplicate items on re-sync"

      - section: "5"
        title: Scraper Scheduling
        testable: false

      - section: "5.1"
        title: Polling Frequency
        testable: false

      - section: "5.2"
        title: Incremental Scraping
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: tracks last successful scrape time"

      - section: "6"
        title: Implementation Considerations
        testable: false

      - section: "6.1"
        title: HTML Parsing Library
        testable: false

      - section: "6.2"
        title: JavaScript-Rendered Content
        testable: false

      - section: "6.3"
        title: Content Validation
        testable: true
        tests:
          - "tests/cli-scraping.bats::scraping: validates title length"
          - "tests/cli-scraping.bats::scraping: handles empty content selector result"

  - spec: spec-5
    title: "Metadata Storage for Sources and Configuration"
    sections:
      - section: "1"
        title: "Metadata Storage"
        testable: false

      - section: "2.1"
        title: "Source Metadata"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 source metadata: source_id is a valid UUID"
          - "tests/cli-metadata.bats::spec-5 source metadata: created_at is stored in RFC 3339 format"
          - "tests/cli-metadata.bats::spec-5 source metadata: updated_at equals created_at on initial creation"
          - "tests/cli-metadata.bats::spec-5 source metadata: all common fields are stored"
          - "tests/cli-metadata.bats::spec-5 source metadata: enabled_at is set on creation (source enabled by default)"
          - "tests/cli-metadata.bats::spec-5 source metadata: enabled_at is NULL when source is disabled"
          # Cross-referenced from spec-8 source tests
          - "tests/cli-sources.bats::newsfed sources add: adds RSS source successfully"
          - "tests/cli-sources.bats::newsfed sources add: adds Atom source successfully"
          - "tests/cli-sources.bats::newsfed sources add: source is enabled by default"
          - "tests/cli-sources.bats::newsfed sources show: displays source details"

      - section: "2.2"
        title: "Feed Source Metadata"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 feed metadata: last_fetched_at updates after successful sync"
          - "tests/cli-metadata.bats::spec-5 feed metadata: fetch_error_count increments on sync failure"
          - "tests/cli-metadata.bats::spec-5 feed metadata: last_error records failure message on sync failure"
          - "tests/cli-metadata.bats::spec-5 feed metadata: fetch_error_count resets after successful sync"
          # Cross-referenced from spec-8 source management tests
          - "tests/cli-sources.bats::newsfed sources update: updates polling interval"
          - "tests/cli-sources.bats::newsfed sources status: detects sources with errors"
          - "tests/cli-sources.bats::newsfed sources sync: syncs all enabled sources"

      - section: "2.3"
        title: "Website Source Metadata"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 website metadata: scraper_config is stored as valid JSON"
          - "tests/cli-metadata.bats::spec-5 website metadata: scraper_config is NULL for non-website sources"
          # Cross-referenced from spec-8 and spec-3 tests
          - "tests/cli-sources.bats::newsfed sources add: adds website source with config"
          - "tests/cli-sources.bats::newsfed sources update: updates scraper config for website source"

      - section: "2.4"
        title: "User Preferences"
        testable: false
        # Config table exists but user preference management is not exposed via CLI

      - section: "3.1"
        title: "SQLite-Based Storage"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 storage: metadata database is a valid SQLite file"
          - "tests/cli-metadata.bats::spec-5 storage: metadata is separate from news item storage"
          # Cross-referenced from spec-8 init tests
          - "tests/cli-init.bats::newsfed init: creates metadata database"

      - section: "3.1.1"
        title: "Database Schema"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 schema: sources table has all expected columns"
          - "tests/cli-metadata.bats::spec-5 schema: config table exists with key and value columns"
          - "tests/cli-metadata.bats::spec-5 schema: source_errors table exists with expected columns"
          - "tests/cli-metadata.bats::spec-5 schema: source_id column is TEXT type"
          - "tests/cli-metadata.bats::spec-5 schema: source_id is the primary key"
          - "tests/cli-metadata.bats::spec-5 schema: fetch_error_count defaults to 0"
          - "tests/cli-metadata.bats::spec-5 source metadata: created_at is stored in RFC 3339 format"

      - section: "3.1.2"
        title: "Example Data"
        testable: false

      - section: "3.2"
        title: "Alternative Storage Options"
        testable: false

      - section: "4.1"
        title: "Source Management"
        testable: false

      - section: "4.1.1"
        title: "Create Source"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 create: generates unique UUIDs for different sources"
          - "tests/cli-metadata.bats::spec-5 create: timestamps are set to approximately current time"
          - "tests/cli-metadata.bats::spec-5 create: stores correct source_type for each type"
          - "tests/cli-metadata.bats::spec-5 source metadata: enabled_at is set on creation (source enabled by default)"
          # Cross-referenced from spec-8 add tests
          - "tests/cli-sources.bats::newsfed sources add: adds RSS source successfully"
          - "tests/cli-sources.bats::newsfed sources add: adds Atom source successfully"
          - "tests/cli-sources.bats::newsfed sources add: adds website source with config"
          - "tests/cli-sources.bats::newsfed sources add: source is enabled by default"

      - section: "4.1.2"
        title: "Read Source"
        testable: true
        tests:
          # Cross-referenced from spec-8 show/list tests
          - "tests/cli-sources.bats::newsfed sources show: displays source details"
          - "tests/cli-sources.bats::newsfed sources show: handles non-existent source"
          - "tests/cli-sources.bats::newsfed sources list: shows all sources"
          - "tests/cli-sources.bats::newsfed sources list: handles empty source list"

      - section: "4.1.3"
        title: "Update Source"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 update: automatically updates updated_at timestamp"
          - "tests/cli-metadata.bats::spec-5 update: does not modify created_at"
          - "tests/cli-metadata.bats::spec-5 update: polling_interval is stored in database"
          - "tests/cli-metadata.bats::spec-5 enable/disable: updated_at changes when enabling or disabling"
          # Cross-referenced from spec-8 update tests
          - "tests/cli-sources.bats::newsfed sources update: updates source name"
          - "tests/cli-sources.bats::newsfed sources update: updates polling interval"
          - "tests/cli-sources.bats::newsfed sources update: updates scraper config for website source"

      - section: "4.1.4"
        title: "Delete Source"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 delete: news items persist after source deletion"
          - "tests/cli-metadata.bats::spec-5 delete: source row is removed from database"
          # Cross-referenced from spec-8 delete tests
          - "tests/cli-sources.bats::newsfed sources delete: deletes a source"
          - "tests/cli-sources.bats::newsfed sources delete: handles non-existent source"

      - section: "4.2"
        title: "Configuration Management"
        testable: false
        # Config table exists but Get/UpdateConfig not exposed via CLI

      - section: "5.1"
        title: "News Feed Aggregator"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 aggregator: sync skips disabled sources"
          - "tests/cli-metadata.bats::spec-5 aggregator: sync updates operational metadata in database"
          # Cross-referenced from spec-8 sync tests
          - "tests/cli-sources.bats::newsfed sources sync: syncs all enabled sources"
          - "tests/cli-sources.bats::newsfed sources sync: syncs specific source by ID"

      - section: "5.2"
        title: "CLI Tools"
        testable: true
        tests:
          # All spec-8 source management tests validate CLI tools for spec 5
          - "tests/cli-sources.bats::newsfed sources add: adds RSS source successfully"
          - "tests/cli-sources.bats::newsfed sources list: shows all sources"
          - "tests/cli-sources.bats::newsfed sources enable: enables a disabled source"
          - "tests/cli-sources.bats::newsfed sources disable: disables a source"
          - "tests/cli-sources.bats::newsfed sources delete: deletes a source"
          - "tests/cli-sources.bats::newsfed sources show: displays source details"

      - section: "6.1"
        title: "Validation"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 validation: rejects malformed scraper config JSON"
          - "tests/cli-metadata.bats::spec-5 validation: rejects nonexistent config file"
          # Cross-referenced from spec-8 validation tests
          - "tests/cli-sources.bats::newsfed sources add: requires -type flag"
          - "tests/cli-sources.bats::newsfed sources add: requires -url flag"
          - "tests/cli-sources.bats::newsfed sources add: requires -name flag"
          - "tests/cli-sources.bats::newsfed sources add: rejects invalid source type"
          - "tests/cli-sources.bats::newsfed sources update: validates interval format"
          - "tests/cli-errors.bats::newsfed errors: validates UUID format"
          - "tests/cli-errors.bats::newsfed errors: validates URL format"

      - section: "6.2"
        title: "Migration and Backup"
        testable: true
        tests:
          - "tests/cli-metadata.bats::spec-5 backup: database file is copyable and backup is usable"

      - section: "6.3"
        title: "Defaults and Templates"
        testable: false

      - section: "6.4"
        title: "Source Groups and Tags"
        testable: false

      - section: "7.1"
        title: "URL Validation"
        testable: true
        tests:
          # Cross-referenced from spec-8 validation tests
          - "tests/cli-errors.bats::newsfed errors: validates URL format"
          - "tests/cli-sources.bats::newsfed sources add: requires -url flag"

      - section: "7.2"
        title: "Credential Storage"
        testable: false

      - section: "7.3"
        title: "Rate Limiting"
        testable: true
        tests:
          # Cross-referenced from spec-3 scraping tests
          - "tests/cli-scraping.bats::scraping: respects rate limiting between requests"

      - section: "8"
        title: "Testing Considerations"
        testable: false
