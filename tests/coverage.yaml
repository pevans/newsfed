# Specification Test Coverage
# This file tracks which specification sections have black box test coverage
#
# Structure:
#   specs: List of Specifications
#     - spec: Specification identifier (e.g., spec-8)
#       title: Specification title
#       sections: List of sections in the specification
#         - section: Section number (e.g., 3.1.1)
#           title: Section title
#           testable: Whether this section can be tested with black box tests
#           tests: List of test files that cover this section (empty list if not tested)

specs:
  - spec: spec-8
    title: Basic News Feed Client
    sections:
      - section: "1"
        title: Overview
        testable: false

      - section: "2"
        title: Client Architecture
        testable: false

      - section: "3.1.1"
        title: List News Items
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list: shows recent items"
          - "tests/cli-list.bats::newsfed list: does not show old unpinned items"
          - "tests/cli-list.bats::newsfed list --all: shows all items"
          - "tests/cli-list.bats::newsfed list --publisher: filters by publisher"
          - "tests/cli-list.bats::newsfed list --pinned: shows only pinned items"
          - "tests/cli-list.bats::newsfed list --sort: sorts results"
          - "tests/cli-list.bats::newsfed list --limit: limits results"
          - "tests/cli-list.bats::newsfed list --offset: paginates results"

      - section: "3.1.2"
        title: View Individual Items
        testable: true
        tests:
          - "tests/cli-items.bats::newsfed show: displays all item metadata"

      - section: "3.1.3"
        title: Pin and Unpin Items
        testable: true
        tests:
          - "tests/cli-items.bats::newsfed pin: pins an unpinned item"
          - "tests/cli-items.bats::newsfed unpin: unpins a pinned item"

      - section: "3.1.4"
        title: Open Items in Browser
        testable: true
        tests:
          - "tests/cli-items.bats::newsfed open: opens item in browser"

      - section: "3.2.1"
        title: List Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources list: shows all sources"

      - section: "3.2.2"
        title: View Source Details
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources show: displays source details"

      - section: "3.2.3"
        title: Add Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources add: adds RSS source"
          - "tests/cli-sources.bats::newsfed sources add: adds Atom source"
          - "tests/cli-sources.bats::newsfed sources add: adds website source"

      - section: "3.2.4"
        title: Update Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources update: updates source name"
          - "tests/cli-sources.bats::newsfed sources update: updates source URL"

      - section: "3.2.5"
        title: Enable and Disable Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources disable: disables a source"
          - "tests/cli-sources.bats::newsfed sources enable: enables a source"

      - section: "3.2.6"
        title: Delete Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources delete: deletes a source"

      - section: "3.2.7"
        title: Sync Sources
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources sync: syncs sources"

      - section: "3.3.1"
        title: Check Source Status
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources status: shows no sources message when empty"
          - "tests/cli-sources.bats::newsfed sources status: shows all sources healthy when no issues"
          - "tests/cli-sources.bats::newsfed sources status: detects sources with errors"
          - "tests/cli-sources.bats::newsfed sources status: detects never fetched sources"
          - "tests/cli-sources.bats::newsfed sources status: detects stale sources (>24h)"
          - "tests/cli-sources.bats::newsfed sources status: detects disabled sources"
          - "tests/cli-sources.bats::newsfed sources status: verbose mode shows full error messages"
          - "tests/cli-sources.bats::newsfed sources status: handles mixed health states"
          - "tests/cli-sources.bats::newsfed sources status: provides actionable suggestions"

      - section: "3.3.2"
        title: View Error History
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources errors: shows no errors for clean source"
          - "tests/cli-sources.bats::newsfed sources errors: shows recorded errors"
          - "tests/cli-sources.bats::newsfed sources errors: shows errors in reverse chronological order"
          - "tests/cli-sources.bats::newsfed sources errors: requires source ID argument"
          - "tests/cli-sources.bats::newsfed sources errors: validates source ID format"
          - "tests/cli-sources.bats::newsfed sources errors: handles non-existent source"

      - section: "4.1"
        title: Storage Configuration
        testable: true
        tests:
          - "tests/cli-config.bats::newsfed config: reads from environment variables"
          - "tests/cli-config.bats::newsfed config: reads from config file"
          - "tests/cli-config.bats::newsfed config: environment overrides config file"
          - "tests/cli-config.bats::newsfed config: supports storage type"

      - section: "5.1.1"
        title: Table Format (Default)
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list: default output format"
          - "tests/cli-list.bats::newsfed list --format=table: shows table format"

      - section: "5.1.2"
        title: JSON Format
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list --format=json: outputs JSON"

      - section: "5.1.3"
        title: Compact Format
        testable: true
        tests:
          - "tests/cli-list.bats::newsfed list --format=compact: shows compact format"

      - section: "6.1"
        title: Storage Errors
        testable: true
        tests:
          - "tests/cli-errors.bats::newsfed errors: handles missing metadata database"
          - "tests/cli-errors.bats::newsfed errors: handles corrupted database"
          - "tests/cli-errors.bats::newsfed errors: handles missing feed directory"
          - "tests/cli-errors.bats::newsfed errors: handles corrupted JSON files"

      - section: "6.2"
        title: User Input Validation
        testable: true
        tests:
          - "tests/cli-sources.bats::newsfed sources add: requires --type flag"
          - "tests/cli-sources.bats::newsfed sources add: requires --url flag"
          - "tests/cli-sources.bats::newsfed sources add: requires --name flag"
          - "tests/cli-sources.bats::newsfed sources add: rejects invalid type"
          - "tests/cli-errors.bats::newsfed errors: validates UUID format"
          - "tests/cli-errors.bats::newsfed errors: validates URL format"

      - section: "6.3"
        title: Storage Initialization
        testable: true
        tests:
          - "tests/cli-init.bats::newsfed init: creates metadata database"
          - "tests/cli-init.bats::newsfed init: creates feed directory"
          - "tests/cli-init.bats::newsfed doctor: verifies healthy storage"
          - "tests/cli-init.bats::newsfed doctor: detects missing database"
          - "tests/cli-init.bats::newsfed doctor: detects missing directory"

      - section: "6.4"
        title: Partial Failures
        testable: true
        tests:
          - "tests/cli-errors.bats::newsfed errors: handles corrupted JSON item files"
          - "tests/cli-errors.bats::newsfed errors: list displays valid items alongside corrupted file warnings"
          - "tests/cli-errors.bats::newsfed errors: list reports multiple corrupted files"

      - section: "7"
        title: Future Enhancements
        testable: false

      - section: "7"
        title: Security Considerations
        testable: false

      - section: "8"
        title: Implementation Considerations
        testable: false

      - section: "9"
        title: Example Workflows
        testable: false

      - section: "10"
        title: Testing
        testable: false

      - section: "11"
        title: Implementation Phases
        testable: false

      - section: "12"
        title: Relationship to Other Specifications
        testable: false
